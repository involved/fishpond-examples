$fish-width: 140px;
$fish-spacing: 5px;

@mixin fish-scale($x){
  $scale: (1-((3*$x)/100));
  width: $fish-width * $scale;
}

@mixin width-transtion($duration){
  transition: width $duration;
  -moz-transition: width $duration; /* Firefox 4 */
  -webkit-transition: width $duration; /* Safari and Chrome */
  -o-transition: width $duration; /* Opera */
}

#query{
  #results{
    ul{
      margin-left: -$fish-spacing !important;
    }
    .thumbnails{
      //margin-left: -$fish-spacing !important;
      
      .fish{
        position: relative;

        width: $fish-width;
        margin-left: $fish-spacing !important;
        $i: 40;
        @while $i >= 0 {
          &[data-pos-start='#{$i}']{
            @include fish-scale($i);
            top: 0px+($i*10);
          }
          $i: $i - 1;
        }

        &:nth-child(n+4) { 
          border-top: purple 3px solid !important;
          float: right;
        }

        &:nth-child(n+7) { 
          float: left;
          border-top: green 3px solid !important;
        }

        &:nth-child(n+11) { 
          border-top: purple 3px solid !important;
          float: right;
        }

        &.animating{
          $i: 40;
          @while $i >= 0 {
            &[data-pos-end='#{$i}']{ 
              @include width-transtion(0.5s);
              @include fish-scale($i);
            }
            $i: $i - 1;
          }
        }
      }
    }
  }

  &.dev{
    #results{
      .thumbnails{
        .fish{
          border-top: orange 3px solid;
          &.animating{ border-top: green 3px solid; }
          &:before { content: "New: " attr(data-pos-end); }
          &:after { content: "Current: " attr(data-pos-start); }

          .thumbnail{
            min-height: 10px !important;
            border: none;
            padding: 0;
            border: 0;
            .title,
            .btn{
              display: none !important;
            }
            .details{
              padding: 0 !important;
              margin-bottom: 0 !important;
            }
          }
        }
      }
    }   
  }
}