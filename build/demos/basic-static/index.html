<!DOCTYPE html>
<!--[if lt IE 7]> <html lang="en" class="no-js ie6 old-ie"> <![endif]-->
<!--[if IE 7]>    <html lang="en" class="no-js ie7 old-ie"> <![endif]-->
<!--[if IE 8]>    <html lang="en" class="no-js ie8 old-ie"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class='no-js' lang='en'>
  <!--<![endif]-->
  <head>
    <meta charset='utf-8' />
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible' />
    <title>Basic (Static) | Demo | Fishpond</title>
    <meta content='noindex, nofollow' name='robots' />
    <meta content='' name='keywords' />
    <meta content='width=device-width, maximum-scale=1.0' name='viewport' />
    <script src="/fishpond-examples/javascripts/plugins.js" type="text/javascript"></script>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/themes/cupertino/jquery-ui.css" media="screen" rel="stylesheet" type="text/css" />
    <style type='text/css'>
      /*<![CDATA[*/
        body{
          padding-top: 100px;
        }
        .hidden{
          display: none;
        }
      /*]]>*/
    </style>
    
  </head>
  <body>
    <div class='navbar navbar-fixed-top'>
      <div class='navbar-inner'>
        <div class='container'>
          <a class='brand' href='/fishpond-examples/'>Fishpond Examples</a>
          <ul class='nav'>
            <li class='dropdown'>
              <a class='dropdown-toggle' data-toggle='dropdown' href='#'>
                Demos
                <b class='caret'></b>
              </a>
              <ul class='dropdown-menu'>
                <li><a href="/fishpond-examples/demos/basic-dynamic">basic-dynamic</a></li>
                <li><a href="/fishpond-examples/demos/basic-html5">basic-html5</a></li>
                <li><a href="/fishpond-examples/demos/basic-static">basic-static</a></li>
                <li><a href="/fishpond-examples/demos/kitchen-sink">kitchen-sink</a></li>
                <li><a href="/fishpond-examples/demos/science-majors">science-majors</a></li>
                <li class='divider'></li>
                <li><a href="/fishpond-examples/lab/">Labs</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class='container' id='loading'>
      <div class='span4 offset4'>
        <div class='progress progress-striped active'>
          <div class='bar' style='width: 100%'></div>
        </div>
      </div>
    </div>
    <div class='row'>
      <div class='span12'>
        <div class='hidden'>
          <div id='disqus_thread'></div>
        </div>
        <script type='text/javascript'>
          //<![CDATA[
            var disqus_shortname = 'ifishdemos'; 
            var disqus_developer = 1;
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
            
            function disqus_config() {
              this.callbacks.onReady = [function() {
                var frameHeight = $(document).height();
                $('iframe.comment_frame', top.document).attr("height", frameHeight)
              }];
              this.callbacks.onNewComment = [function() {
                var frameHeight = $(document).height();
                $('iframe.comment_frame', top.document).attr("height", frameHeight)
              }];
            }
          //]]>
        </script>
      </div>
    </div>
    <div class='container hide' id='auth'>
      <div class='span6 offset3'>
        <center>
          <form class='well form-inline'>
            <input class='input-large' id='api_key' placeholder='API key' type='text' />
            <input class='input-small' id='pond_token' placeholder='Pond Token' type='text' />
            <button class='btn btn-success' type='submit'>
              Connect
            </button>
          </form>
        </center>
      </div>
    </div>
    <div class='container hide' id='demo'>
      <div class='page-header'>
  <h1>Basic (Static) Demo</h1>
  <br />
  <div class='row'>
    <div class='span9'>
      <div class='alert alert-error'>
        <strong>Note:</strong>
        The form for this demo has been hardcoded for demonstration purposes. Results filtering will only work with the 'Science Majors' pond `uhEHwd`.
      </div>
      <p>
        <strong>Powered by:</strong>
        <a target="_blank" href="http://jqueryui.com/demos/slider/">jQuery UI Slider</a>
      </p>
    </div>
    <div class='span2 offset1'>
      <span class='label label-important'>Metadata disabled</span>
      <br />
      <span class='label label-important'>Filters disabled</span>
    </div>
  </div>
</div>
<div class='row'>
  <div class='span5'>
    <div class='well'>
      <h2>Tags</h2>
      <form class='form-horizontal'>
        <fieldset>
          <div class='control-group'>
            <label class='control-label'>Quantitative (10)</label>
            <div class='controls'>
              <input data-slug='quantitative' id='query_tags_quantitative' name='query[tags][quantitative]' type='hidden' value='10' />
              <div class='slider span2' data-target='query[tags][quantitative]'></div>
            </div>
          </div>
          <div class='control-group'>
            <label class='control-label'>Biological (10)</label>
            <div class='controls'>
              <input data-slug='biological' id='query_tags_biological' name='query[tags][biological]' type='hidden' value='10' />
              <div class='slider span2' data-target='query[tags][biological]'></div>
            </div>
          </div>
          <div class='control-group'>
            <label class='control-label'>Pure (10)</label>
            <div class='controls'>
              <input data-slug='pure' id='query_tags_pure' name='query[tags][pure]' type='hidden' value='10' />
              <div class='slider span2' data-target='query[tags][pure]'></div>
            </div>
          </div>
          <div class='control-group'>
            <label class='control-label'>Indoors (10)</label>
            <div class='controls'>
              <input data-slug='indoors' id='query_tags_indoors' name='query[tags][indoors]' type='hidden' value='10' />
              <div class='slider span2' data-target='query[tags][indoors]'></div>
            </div>
          </div>
          <div class='control-group'>
            <label class='control-label'>Dunno (10)</label>
            <div class='controls'>
              <input data-slug='dunno' id='query_tags_dunno' name='query[tags][dunno]' type='hidden' value='10' />
              <div class='slider span2' data-target='query[tags][dunno]'></div>
            </div>
          </div>
        </fieldset>
        <h2>Filters</h2>
        <fieldset class='filters'>
          <div class='control-group'>
            <div class='control-label'>
              Only show:
            </div>
            <div class='controls'>
              <label class='checkbox'>
                <input data-slug='maths-prerequisite' id='query_filter_sgH' name='query[filters][sgH]' type='checkbox' value='0'>Maths Prerequisite</input>
              </label>
            </div>
          </div>
          <span class='label'>
            Filters not included in this demo
          </span>
        </fieldset>
      </form>
    </div>
  </div>
  <div class='span6 offset1'>
    <h2>Results</h2>
    <ul class='results'></ul>
  </div>
</div>
    </div>
    <div class='container'>
      <hr />
      <footer>
        &copy; iFish 2012
      </footer>
    </div>
    <script src="/fishpond-examples/javascripts/vendor/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" type="text/javascript"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js" type="text/javascript"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-modal.js" type="text/javascript"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-typeahead.js" type="text/javascript"></script>
    <script src="http://ifish-prototype.herokuapp.com/assets/api/v1/fishpond.js" type="text/javascript"></script>
    <script src="/fishpond-examples/javascripts/vendor/jquery.ui.touch-punch.min.js" type="text/javascript"></script>
    <script type='text/javascript'>
      //<![CDATA[
        var setupFishpond = function(fishpond){ // you must define this function in your demo, if you want hooks to the fishpond
        
          fishpond.resultsUpdated(function(results){
            //console.log(results);
        
            $(".results li").remove(); // Clear old results
        
            for(var i = 0; i < results.length; i++){
              var li = $("<li></li>");
              var thumbnail = $("<div></div>");
              thumbnail.html(results[i].fish.title);
              li.append(thumbnail);
              $(".results").append(li);
            }
          });
        
          fishpond.ready(function(pond){
            $("#loading").fadeOut(0);
            $("#demo").fadeIn(400);
            $("#demo h1").append(' "' + pond.name + '"');
            fishpond.query({}, {});
          });
        
          fishpond.loading(function(percent){
            $("#loading .progress").removeClass("progress-striped");
            $("#loading .bar").css({width: (percent * 100) + "%"});
          });
        
          $(".slider").slider({
            value: 10,
            min: 0,
            max: 20,
            step: 1,
            slide: function(e, ui){
              var label = $(this).parents('.control-group').find('label');
              var hiddenField = $("input[name='" + $(this).data('target') + "']");
              var value = ui['value'];
        
              if(value.toString() != hiddenField.val().toString()){
                hiddenField.val(value);
                label.html(label.html().split("(")[0] + " (" + value.toString() + ")");
        
                var tags = {};
                var filters = {};
                $("form input").each(function(){
                  tags[$(this).data('slug')] = $(this).val();
                });
                fishpond.query({
                  quantitative: $("#query_tags_quantitative").val(),
                  biological: $("#query_tags_biological").val(),
                  pure: $("#query_tags_pure").val(),
                  indoors: $("#query_tags_indoors").val(),
                  dunno: $("#query_tags_dunno").val()
                },
                {/* no filters, yet */});
              }
            }
          });
        };
      //]]>
    </script>
    <script type='text/javascript'>
  //<![CDATA[
    $(function(){
      // Autofill auth form
      $("#auth form").each(function(){
        var form = $(this);
        var apiKeyInput = $("#api_key", form);
        var pondTokenInput = $("#pond_token", form);
        apiKeyInput.val(localStorage.getItem("fishpond_api_key"));
        pondTokenInput.val(localStorage.getItem("fishpond_pond_token"));
       });
    
      $("#auth").fadeIn(400);
      $("#loading").fadeOut(0);
    
      // Default Authentication setup
      $("#auth form").submit(function(e){
        e.preventDefault();
        var form = $(this);
        var apiKeyInput = $("#api_key", form);
        var pondTokenInput = $("#pond_token", form);
        var apiKey = apiKeyInput.val();
        var pondToken = pondTokenInput.val();
        var errors = [];
    
        if(apiKey.length != 41){
          errors.push("API key should be 41 characters long");
        }
        if(pondToken.length != 6){
          errors.push("Pond token should be 6 characters long");
        }
    
        if(errors.length > 0){
          alert("There were errors in your authentication: " + errors.join(", "));
        } else {
          $("#auth").fadeOut(0);
          $("#loading").fadeIn(400);
          localStorage.setItem("fishpond_api_key", apiKey);
          localStorage.setItem("fishpond_pond_token", pondToken);
    
          var options = { debug: false };
          var fishpond = new Fishpond(apiKey, options);
          setupFishpond(fishpond);
          fishpond.init(pondToken);
          }
      });
    });
  //]]>
</script>
  </body>
</html>
